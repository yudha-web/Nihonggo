<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nihonggo ‚Äî Modern Audio Player</title>
  <style>
    :root{
      --bg:#0f1720; --card:#0f1728; --muted:#9aa6b2; --accent:#1db954; --panel:#0b1220;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:linear-gradient(180deg,#071021 0%, #0b1220 100%); color:#e6eef3;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      padding:28px;
    }
    .wrap{max-width:980px;margin:0 auto;display:grid;grid-template-columns:1fr 360px;gap:22px}
    header{grid-column:1/-1;display:flex;align-items:center;gap:16px}
    h1{margin:0;font-size:20px}
    .meta{color:var(--muted);font-size:13px}
    .playerCard{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 30px rgba(0,0,0,0.6)}
    /* Mengatur kontrol agar tombol ffw dan rwd bisa diletakkan di samping info */
    .audio-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .bigbtn{width:58px;height:58px;border-radius:12px;border:none;background:linear-gradient(180deg,var(--panel),#071426);color:white;font-size:18px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,0.5)}
    .smbtn{width:42px;height:42px;border-radius:10px;border:none;background:var(--glass);color:var(--muted);cursor:pointer; display: flex; align-items: center; justify-content: center;}
    /* Ikon SVG di tengah tombol */
    .smbtn svg, .bigbtn svg {
      display: block;
      margin: 0 auto;
    }
    .info{margin-left:12px; flex-grow: 1;}
    .title{font-weight:600}
    .sub{color:var(--muted);font-size:13px}
    .progress{height:8px;background:rgba(255,255,255,0.06);border-radius:999px;cursor:pointer;margin-top:14px;position:relative}
    .progress > .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#3dd37d);border-radius:999px}
    .time{display:flex;justify-content:space-between;font-size:13px;color:var(--muted);margin-top:8px}
    .rightPanel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:14px;border-radius:12px;height:fit-content}
    .playlist{max-height:68vh;overflow:auto;padding-right:6px}
    .track{display:flex;align-items:center;gap:12px;padding:10px;border-radius:8px;cursor:pointer}
    .track:hover{background:rgba(255,255,255,0.02)}
    .track.active{background:linear-gradient(90deg,rgba(29,185,84,0.14),rgba(29,185,84,0.06));box-shadow:inset 0 1px 0 rgba(255,255,255,0.02)}
    .track .num{width:36px;text-align:right;color:var(--muted);font-size:13px}
    .track .name{flex:1;font-size:14px}
    .controlsBottom{display:flex;gap:8px;align-items:center;margin-top:12px}
    select,input[type="range"]{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:6px;border-radius:8px}
    .tiny{font-size:13px;color:var(--muted)}

    /* CSS Tambahan untuk Tombol RWD/FFW */
    .rwd-btn, .ffw-btn {
      font-weight: 600;
      font-size: 14px;
      flex-shrink: 0; /* Mencegah tombol mengecil */
    }
    .vol-ctrl-group{ margin-left:10px; }
    .vol-range{ width:120px; }

    @media(max-width:860px){.wrap{grid-template-columns:1fr;}.rightPanel{order:3}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Nihonggo ‚Äî Modern Audio Player</h1>
        <div class="meta">Semua audio bisa diputar langsung (streaming). Kontrol: speed, prev/next, seek, volume, dan langkah 10 detik.</div>
      </div>
    </header>

    <section class="playerCard">
      <div class="audio-controls">
        <button id="prev" class="smbtn" title="Previous">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M.5 3.5A.5.5 0 0 1 1 4v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zm4-1a.5.5 0 0 1 .5.5v3.146L14.707 9.854a.5.5 0 0 1 .146.353v3.146a.5.5 0 0 1-.724.447l-7-4.5a.5.5 0 0 1-.01-.734l7-4.5A.5.5 0 0 1 14 3.25z"/></svg>
        </button>
        <button id="play" class="bigbtn" title="Play/Pause">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 16 16"><path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/></svg>
        </button>
        <button id="next" class="smbtn" title="Next">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M15.5 3.5a.5.5 0 0 1 0 1v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zM11 4.5v7l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V2.846c0-.63.692-1.01 1.233-.696L11 4.5z"/></svg>
        </button>

        <div class="info">
          <div class="title" id="nowTitle">‚Äî Pilih lagu ‚Äî</div>
          <div class="sub" id="nowSub">Nihonggo collection</div>
        </div>
        
        <button id="rwd" class="smbtn rwd-btn" title="Rewind 10s">-10s</button>
        
        <button id="ffw" class="smbtn ffw-btn" title="Fast Forward 10s">+10s</button>
      </div>

      <div class="progress" id="progress">
        <div class="bar" id="bar"></div>
      </div>
      <div class="time"><span id="current">0:00</span><span id="duration">0:00</span></div>

      <div class="controlsBottom">
        <label class="tiny">Speed</label>
        <select id="speed">
          <option value="0.25">0.25√ó</option>
          <option value="0.5">0.5√ó</option>
          <option value="0.75">0.75√ó</option>
          <option value="1.0" selected>1√ó</option>
          <option value="1.25">1.25√ó</option>
          <option value="1.5">1.5√ó</option>
          <option value="1.75">1.75√ó</option>
          <option value="2.0">2√ó</option>
          <option value="2.5">2.5√ó</option>
          <option value="3.0">3√ó</option>
        </select>

        <label class="tiny vol-ctrl-group">Volume</label>
        <input id="vol" type="range" min="0" max="1" step="0.01" value="1" class="vol-range">

        <button id="loop" class="smbtn" title="Toggle loop">üîÅ</button>
        <button id="shuffle" class="smbtn" title="Shuffle">üîÄ</button>
      </div>
    </section>

    <aside class="rightPanel playerCard">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <strong>Playlist (87)</strong>
        <div style="font-size:13px;color:var(--muted)"><button id="playAll" class="smbtn" title="Play All">‚ñ∂ All</button></div>
      </div>
      <div class="playlist" id="playlist"></div>
    </aside>
  </div>

  <audio id="audio" preload="metadata"></audio>

  <script>
    // LIST: gunakan nama file persis seperti di repo (sudah kamu upload)
    const files = [
"01 Dai 1 Ka - Kaiwa.mp3","02 Dai 1 Ka - Mondai 1.mp3","03 Dai 1 Ka - Mondai 2.mp3","04 Dai 1 Ka - Mondai 3.mp3",
"05 Dai 2 Ka - Kaiwa.mp3","06 Dai 2 Ka - Mondai 1.mp3","07 Dai 2 Ka - Mondai 2.mp3","08 Dai 2 Ka - Mondai 3.mp3",
"09 Dai 3 Ka - Kaiwa.mp3","10 Dai 3 Ka - Mondai 1.mp3","11 Dai 3 Ka - Mondai 2.mp3","12 Dai 4 Ka - Kaiwa.mp3",
"13 Dai 4 Ka - Mondai 1.mp3","14 Dai 4 Ka - Mondai 2.mp3","15 Dai 4 Ka - Mondai 3.mp3","16 Dai 4 Ka - Mondai 4.mp3",
"17 Dai 5 Ka - Kaiwa.mp3","18 Dai 5 Ka - Mondai 1.mp3","19 Dai 5 Ka - Mondai 2.mp3","20 Dai 5 Ka - Mondai 3.mp3",
"21 Dai 6 Ka - Kaiwa.mp3","22 Dai 6 Ka - Mondai 1.mp3","23 Dai 6 Ka - Mondai 2.mp3","24 Dai 7 Ka - Kaiwa.mp3",
"25 Dai 7 Ka - Mondai 1.mp3","26 Dai 7 Ka - Mondai 2.mp3","27 Dai 7 Ka - Mondai 3.mp3","28 Dai 8 Ka - Kaiwa.mp3",
"29 Dai 8 Ka - Mondai 1.mp3","30 Dai 8 Ka - Mondai 2.mp3","31 Dai 8 Ka - Mondai 3.mp3","32 Dai 9 Ka - Kaiwa.mp3",
"33 Dai 9 Ka - Mondai 1.mp3","34 Dai 9 Ka - Mondai 2.mp3","35 Dai 10 Ka - Kaiwa.mp3","36 Dai 10 Ka - Mondai 1.mp3",
"37 Dai 10 Ka - Mondai 2.mp3","38 Dai 10 Ka - Mondai 3.mp3","39 Dai 11 Ka - Kaiwa.mp3","40 Dai 11 Ka - Mondai 1.mp3",
"41 Dai 11 Ka - Mondai 2.mp3","42 Dai 11 Ka - Mondai 3.mp3","43 Dai 12 Ka - Kaiwa.mp3","44 Dai 12 Ka - Mondai 1.mp3",
"45 Dai 12 Ka - Mondai 2.mp3","46 Dai 13 Ka - Kaiwa.mp3","47 Dai 13 Ka - Mondai 1.mp3","48 Dai 13 Ka - Mondai 2.mp3",
"49 Dai 14 Ka - Kaiwa.mp3","50 Dai 14 Ka - Mondai 1.mp3","51 Dai 14 Ka - Mondai 2.mp3","52 Dai 14 Ka - Mondai 3.mp3",
"53 Dai 15 Ka - Kaiwa.mp3","54 Dai 15 Ka - Mondai 1.mp3","55 Dai 15 Ka - Mondai 2.mp3","56 Dai 16 Ka - Kaiwa.mp3",
"57 Dai 16 Ka - Mondai 1.mp3","58 Dai 16 Ka - Mondai 2.mp3","59 Dai 16 Ka - Mondai 3.mp3","60 Dai 17 Ka - Kaiwa.mp3",
"61 Dai 17 Ka - Mondai 1.mp3","62 Dai 17 Ka - Mondai 2.mp3","63 Dai 18 Ka - Kaiwa.mp3","64 Dai 18 Ka - Mondai 1.mp3",
"65 Dai 18 Ka - Mondai 2.mp3","66 Dai 19 Ka - Kaiwa.mp3","67 Dai 19 Ka - Mondai 1.mp3","68 Dai 19 Ka - Mondai 2.mp3",
"69 Dai 20 Ka - Kaiwa.mp3","70 Dai 20 Ka - Mondai 1.mp3","71 Dai 20 Ka - Mondai 2.mp3","72 Dai 21 Ka - Kaiwa.mp3",
"73 Dai 21 Ka - Mondai 1.mp3","74 Dai 21 Ka - Mondai 2.mp3","75 Dai 22 Ka - Kaiwa.mp3","76 Dai 22 Ka - Mondai 1.mp3",
"77 Dai 22 Ka - Mondai 2.mp3","78 Dai 23 Ka - Kaiwa.mp3","79 Dai 23 Ka - Mondai 1.mp3","80 Dai 23 Ka - Mondai 2.mp3",
"81 Dai 23 Ka - Mondai 3.mp3","82 Dai 24 Ka - Kaiwa.mp3","83 Dai 24 Ka - Mondai 1.mp3","84 Dai 24 Ka - Mondai 2.mp3",
"85 Dai 25 Ka - Kaiwa.mp3","86 Dai 25 Ka - Mondai 1.mp3","87 Dai 25 Ka - Mondai 2.mp3"
    ];

    // Ikon SVG untuk tombol
    const playIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 16 16"><path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/></svg>';
    const pauseIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 16 16"><path d="M5.5 3.5A.5.5 0 0 1 6 4v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zm4-1a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z"/></svg>';
    
    // Elements
    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('play');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    const rwdBtn = document.getElementById('rwd'); // Tombol Mundur 10s
    const ffwBtn = document.getElementById('ffw'); // Tombol Maju 10s
    const nowTitle = document.getElementById('nowTitle');
    const nowSub = document.getElementById('nowSub');
    const bar = document.getElementById('bar');
    const progress = document.getElementById('progress');
    const cur = document.getElementById('current');
    const dur = document.getElementById('duration');
    const speed = document.getElementById('speed');
    const vol = document.getElementById('vol');
    const loopBtn = document.getElementById('loop');
    const shuffleBtn = document.getElementById('shuffle');
    const playlistEl = document.getElementById('playlist');
    const playAllBtn = document.getElementById('playAll');

    // state
    let current = 0;
    let isPlaying = false;
    let isLoop = false;
    let isShuffle = false;
    let order = files.map((_,i)=>i);

    // build playlist UI
    function buildList(){
      playlistEl.innerHTML = '';
      files.forEach((f,i)=>{
        const tr = document.createElement('div');
        tr.className = 'track';
        tr.dataset.index = i;
        tr.innerHTML = `<div class="num">${String(i+1).padStart(2,'0')}</div><div class="name">${f}</div>`;
        tr.onclick = ()=>{ playIndex(i); };
        playlistEl.appendChild(tr);
      });
      highlight();
    }

    function highlight(){
      [...document.querySelectorAll('.track')].forEach(n=>n.classList.remove('active'));
      const el = document.querySelector('.track[data-index="'+current+'"]');
      if(el) el.classList.add('active');
    }

    function setSource(i){
      const path = encodeURI(files[i]);
      audio.src = path;
      nowTitle.textContent = files[i];
      nowSub.textContent = `Track ${i+1} / ${files.length}`;
      highlight();
    }

    function playIndex(i){
      current = i;
      setSource(current);
      audio.play().catch(()=>{});
      isPlaying = true;
      playBtn.innerHTML = pauseIcon;
    }

    // controls
    playBtn.onclick = ()=>{
      if(!audio.src){ setSource(current); }
      if(audio.paused){ 
        audio.play(); 
        playBtn.innerHTML = pauseIcon; 
        isPlaying=true; 
      }
      else { 
        audio.pause(); 
        playBtn.innerHTML = playIcon; 
        isPlaying=false; 
      }
    };
    prevBtn.onclick = ()=>{
      current = (current - 1 + files.length) % files.length;
      setSource(current);
      audio.play();
    };
    nextBtn.onclick = ()=>{
      current = (current + 1) % files.length;
      setSource(current);
      audio.play();
    };
    
    // Mundur 10 detik
    rwdBtn.onclick = ()=>{
      if (!isNaN(audio.duration)) {
        // Kurangi 10 detik, pastikan tidak kurang dari 0
        audio.currentTime = Math.max(audio.currentTime - 10, 0);
      }
    };
    
    // Maju 10 detik
    ffwBtn.onclick = ()=>{
      if (!isNaN(audio.duration)) {
        // Tambah 10 detik, pastikan tidak melebihi durasi
        audio.currentTime = Math.min(audio.currentTime + 10, audio.duration);
      }
    };

    audio.addEventListener('timeupdate', ()=>{
      if (!isNaN(audio.duration)){
        const pct = (audio.currentTime / audio.duration) * 100;
        bar.style.width = pct + '%';
        cur.textContent = formatTime(audio.currentTime);
        dur.textContent = formatTime(audio.duration);
      }
    });

    progress.addEventListener('click', (e)=>{
      const rect = progress.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const p = x / rect.width;
      if(!isNaN(audio.duration)) audio.currentTime = p * audio.duration;
    });

    audio.addEventListener('ended', ()=>{
      if(isLoop){ audio.currentTime = 0; audio.play(); return; }
      if(isShuffle){
        current = order[Math.floor(Math.random()*order.length)];
      } else current = (current + 1) % files.length;
      setSource(current);
      audio.play();
    });

    speed.onchange = ()=>{ audio.playbackRate = parseFloat(speed.value); };
    vol.oninput = ()=>{ audio.volume = parseFloat(vol.value); };

    loopBtn.onclick = ()=>{ isLoop = !isLoop; loopBtn.style.background = isLoop ? 'rgba(29,185,84,0.14)' : 'var(--glass)'; };
    shuffleBtn.onclick = ()=>{ isShuffle = !isShuffle; shuffleBtn.style.background = isShuffle ? 'rgba(255,165,0,0.12)' : 'var(--glass)'; };

    playAllBtn.onclick = ()=>{ current = 0; setSource(current); audio.play(); playBtn.innerHTML = pauseIcon; };

    function formatTime(sec){
      if(!sec || isNaN(sec)) return '0:00';
      const s = Math.floor(sec%60).toString().padStart(2,'0');
      const m = Math.floor(sec/60);
      return `${m}:${s}`;
    }

    // keyboard shortcuts
    document.addEventListener('keydown',(e)=>{
      if(e.code==='Space'){ e.preventDefault(); playBtn.click(); }
      if(e.code==='ArrowRight') ffwBtn.click(); // Maju 10 detik dengan ArrowRight
      if(e.code==='ArrowLeft') rwdBtn.click();  // Mundur 10 detik dengan ArrowLeft
      if(e.code==='KeyL') loopBtn.click();
      if(e.code==='KeyS') shuffleBtn.click();
    });

    // init
    buildList();
    setSource(0);
    audio.load();
    // Set ikon Play saat inisialisasi
    playBtn.innerHTML = playIcon; 
  </script>
</body>
</html>
